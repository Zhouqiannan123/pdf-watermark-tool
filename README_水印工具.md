# 🔧 PDF水印工具 - 完整功能说明

## 📋 功能概述

这个工具整合了我们之前开发的所有水印功能，支持：

1. **📁 文件夹图片转PDF+水印** - 将图片文件夹按页码排序转换为带水印的PDF
2. **📄 PDF加水印** - 为现有PDF文件添加水印  
3. **🎨 自定义水印** - 可调整水印文字内容和字体大小

## 🚀 使用方法

### 基本语法
```bash
python3 watermark_tool.py [模式] [输入路径] [输出路径] [水印文字] [字体大小]
```

### 参数说明
- **模式**: `folder` (处理图片文件夹) 或 `pdf` (处理PDF文件)
- **输入路径**: 图片文件夹路径或PDF文件路径
- **输出路径**: 输出PDF文件路径
- **水印文字**: 水印文字内容 (可选，默认: "朋阳托辅内部专用资料")
- **字体大小**: 水印字体大小 (可选，默认: 32px)

## 💡 使用示例

### 示例1: 文件夹图片转PDF加水印
```bash
# 使用默认水印
python3 watermark_tool.py folder "/Users/cuihao/Desktop/人教版数学六年级上册课本jpg" "/Users/cuihao/Desktop/人教版课本_带水印.pdf"

# 自定义水印文字和大小
python3 watermark_tool.py folder "/Users/cuihao/Desktop/冀教版六上书写答案" "/Users/cuihao/Desktop/冀教版答案_大水印.pdf" "内部教学资料" 40
```

### 示例2: 现有PDF加水印
```bash
# 使用默认水印
python3 watermark_tool.py pdf "/Users/cuihao/Desktop/部编版语文六年级上册同步训练答案页.pdf" "/Users/cuihao/Desktop/部编版语文_新水印.pdf"

# 自定义水印文字和大小  
python3 watermark_tool.py pdf "/Users/cuihao/Desktop/原文件.pdf" "/Users/cuihao/Desktop/新文件.pdf" "朋阳托辅专用" 36
```

## 🎨 字体大小建议

| 字体大小 | 效果 | 适用场景 |
|---------|------|---------|
| 20-24px | 小字体，密集布局 | 不想过度影响原内容 |
| 28-32px | 标准字体，平衡布局 | 一般使用，推荐 |
| 36-40px | 大字体，清晰可见 | 需要明显水印效果 |
| 44px+ | 超大字体，稀疏布局 | 强调水印，最清晰 |

## ✨ 水印特性

- **文字内容**: 默认"朋阳托辅内部专用资料"，可自定义
- **字体**: 自动检测系统中文字体，支持STHeiti Light等
- **透明度**: 35% (半透明，不会完全遮挡原内容)
- **旋转角度**: 45° (经典水印角度)
- **颜色**: 黑色
- **布局**: 根据字体大小自动调整密度

## 📁 文件夹处理特点

- **智能排序**: 自动识别文件名中的页码数字 (如: `页面_001`, `页面_002`)
- **格式支持**: JPG, JPEG, PNG, BMP, TIFF
- **自动转换**: 所有图片自动转换为RGB模式适配PDF

## 🔍 实际测试结果

我们已经成功处理了以下文件：

1. **冀教版数学六年级上册一课一练** (128页, 74.58MB) - 20px字体
2. **人教版数学六年级上册课本** (117页, 56.63MB) - 32px字体  
3. **冀教版六上书写答案** (104页, 99.66MB) - 40px字体

## 🛠️ 技术实现

- **Python 3** + **PIL/Pillow** (图片处理)
- **PyPDF2** (PDF操作)
- **ReportLab** (水印生成)
- **跨平台支持** (macOS/Linux/Windows)

## 📞 使用支持

如需查看完整帮助信息：
```bash
python3 watermark_tool.py
```

## 🎯 核心优势

1. **一键操作** - 单个命令完成复杂任务
2. **智能布局** - 根据字体大小自动调整水印密度
3. **中文支持** - 完美支持中文水印文字
4. **批量处理** - 可处理大量图片和长PDF文档
5. **保留功能** - 所有之前开发的功能都得到保留和优化
